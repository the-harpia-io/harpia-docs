<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-incoming-integrations/zabbix">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Zabbix | Harpia Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/docs/incoming-integrations/zabbix"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta data-rh="true" http-equiv="Pragma" content="no-cache"><meta data-rh="true" http-equiv="Expires" content="0"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Zabbix | Harpia Documentation"><meta data-rh="true" name="description" content="Zabbix is a mature and effortless enterprise-class open source monitoring solution for network monitoring and application monitoring of millions of metrics"><meta data-rh="true" property="og:description" content="Zabbix is a mature and effortless enterprise-class open source monitoring solution for network monitoring and application monitoring of millions of metrics"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/docs/incoming-integrations/zabbix"><link data-rh="true" rel="alternate" href="https://github.com/docs/incoming-integrations/zabbix" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/docs/incoming-integrations/zabbix" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Harpia Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Harpia Documentation Atom Feed">





<script>!function(e,t){var n="https://app.chatwoot.com",o=e.createElement(t),a=e.getElementsByTagName(t)[0];o.src=n+"/packs/js/sdk.js",o.async=!0,a.parentNode.insertBefore(o,a),o.onload=function(){window.chatwootSDK.run({websiteToken:"wN8ZGAcEvMYAX6JGgpqwS3yJ",baseUrl:n})}}(document,"script")</script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SV66JJK3QR"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-SV66JJK3QR",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.cbb58a28.css">
<link rel="preload" href="/assets/js/runtime~main.3ec10cf8.js" as="script">
<link rel="preload" href="/assets/js/main.a50b630f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/harp_logo.svg" alt="Harp Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/harp_logo.svg" alt="Harp Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Harpia</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/home-page-review">Home page overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/alert-management">Work with Alerts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/incoming-integrations">Incoming Integrations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Incoming Integrations&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/airbrake">Airbrake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/anodot">Anodot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/api-rest">API REST</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/appdynamics">AppDynamics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/atatus">Atatus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/aws-cloudwatch">AWS CloudWatch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/datadog">Datadog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/dynatrace">Dynatrace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/gcp">GCP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/grafana">Grafana</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/icinga">Icinga2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/newrelic">New Relic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/pingdom">Pingdom</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/prometheus">Prometheus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/prtg">PRTG</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/incoming-integrations/signalfx">SignalFx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/incoming-integrations/zabbix">Zabbix</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/harp-scenarios">Harp Scenarios</a><button aria-label="Toggle the collapsible sidebar category &#x27;Harp Scenarios&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/harp-bots">Harp Bots</a><button aria-label="Toggle the collapsible sidebar category &#x27;Harp Bots&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/integration">Harp Integrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/user-management">User Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/reporting-overview">Reporting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/environments-overview">Environments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/platform-installation">Platform Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/status-page-overview">Platform Health</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/platform-architecture">Platform Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/collaboration">Collaboration</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/incoming-integrations"><span itemprop="name">Incoming Integrations</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Zabbix</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Zabbix</h1><p>Zabbix is a mature and effortless enterprise-class open source monitoring solution for network monitoring and application monitoring of millions of metrics</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How it works<a class="hash-link" href="#how-it-works" title="Direct link to heading">​</a></h3><p>Airbrake sends alerts to the Incident management system endpoint via HTTP webhook</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-register-new-integration-in-harp">How to register new integration in Harp<a class="hash-link" href="#how-to-register-new-integration-in-harp" title="Direct link to heading">​</a></h3><p>Follow <a href="/docs/integration">these steps</a> to register a new integration in Harp Platform</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-configure-in-zabbix">How to configure in Zabbix<a class="hash-link" href="#how-to-configure-in-zabbix" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-add-the-macro-zabbixurl-with-zabbix-frontend-url-for-example-http19216871238081">1. Add the macro {$ZABBIX.URL} with Zabbix frontend URL (for example <a href="http://192.168.7.123:8081" target="_blank" rel="noopener noreferrer">http://192.168.7.123:8081</a>)<a class="hash-link" href="#1-add-the-macro-zabbixurl-with-zabbix-frontend-url-for-example-http19216871238081" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_69.png" src="/assets/images/img_69-6d740c5b17e614e70611425aba8c6f2d.png" width="1024" height="411" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-go-to-media-types-under-the-administration-section">2. Go to Media types under the Administration section<a class="hash-link" href="#2-go-to-media-types-under-the-administration-section" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_70.png" src="/assets/images/img_70-a7eae368a5b416b6de6de16b213ca050.png" width="340" height="580" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-copy-the-contents-of-the-below-yaml-snippet-and-save-it-in-a-file-with-yaml-extension">3. Copy the contents of the below YAML snippet and save it in a file with .yaml extension<a class="hash-link" href="#3-copy-the-contents-of-the-below-yaml-snippet-and-save-it-in-a-file-with-yaml-extension" title="Direct link to heading">​</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">zabbix_export</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;5.4&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;2020-10-16T09:33:50Z&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">media_types</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Harpia</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WEBHOOK</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">parameters</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webhook_url</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&lt;Webhook URL from Harpia UI&gt;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eventack</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{EVENT.ACK.STATUS}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eventdate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{EVENT.DATE}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eventid</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{EVENT.ID}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eventname</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{ALERT.SUBJECT}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eventtags</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{EVENT.TAGS}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eventtime</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{EVENT.TIME}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eventupdate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{EVENT.UPDATE.STATUS}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eventvalue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{EVENT.VALUE}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> event_source</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{EVENT.SOURCE}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> hostip</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{HOST.IP}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> host_name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{HOST.NAME}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> severity</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{EVENT.SEVERITY}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> trigger_description</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{TRIGGER.DESCRIPTION}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> trigger_id</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{TRIGGER.ID}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> triggeropdata</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{EVENT.OPDATA}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> url</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{$ZABBIX.URL}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> trigger_expression</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{TRIGGER.EXPRESSION}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> trigger_hostgroup_name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{TRIGGER.HOSTGROUP.NAME}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> trigger_status</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{TRIGGER.STATUS}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> trigger_name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{TRIGGER.NAME}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        try {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            var params = JSON.parse(value)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                req = new HttpRequest()</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                fields = </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                resp = &#x27;&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // Correspondence between the Harpia and Zabbix severity level</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (typeof params.HTTPProxy === &#x27;string&#x27; </span><span class="token important">&amp;&amp;</span><span class="token plain"> params.HTTPProxy.trim() </span><span class="token tag" style="color:rgb(255, 121, 198)">!==</span><span class="token plain"> &#x27;&#x27;) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                req.setProxy(params.HTTPProxy);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (isNaN(parseInt(params.eventid)) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> params.eventid &lt; 1) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                throw &#x27;incorrect value for variable &quot;eventid&quot;. The value must be a positive number.&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">.indexOf(parseInt(params.event_source)) === </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">1) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">throw &#x27;Incorrect &quot;event_source&quot; parameter given</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;&#x27; + params.event_source + &#x27;&quot;.\nMust be 0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">3.&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // Check </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">EVENT.VALUE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> for trigger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">based and internal events.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (params.eventvalue </span><span class="token tag" style="color:rgb(255, 121, 198)">!==</span><span class="token plain"> &#x27;0&#x27; </span><span class="token important">&amp;&amp;</span><span class="token plain"> params.eventvalue </span><span class="token tag" style="color:rgb(255, 121, 198)">!==</span><span class="token plain"> &#x27;1&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token important">&amp;&amp;</span><span class="token plain"> (params.event_source === &#x27;0&#x27; </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> params.event_source === &#x27;3&#x27;)) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">throw &#x27;Incorrect &quot;eventvalue&quot; parameter given</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;&#x27; + params.eventvalue + &#x27;&quot;.\nMust be 0 or 1.&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (params.event_source === &#x27;0&#x27;) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (params.host_name.length &lt; 1) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    throw &#x27;incorrect value for variable &quot;host_name&quot;. The value must be a non</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">empty string.&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (isNaN(parseInt(params.trigger_id)) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> params.trigger_id &lt; 1) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    throw &#x27;incorrect value for variable &quot;trigger_id&quot;. The value must be a positive number.&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (params.eventack </span><span class="token tag" style="color:rgb(255, 121, 198)">!=</span><span class="token plain"> &#x27;Yes&#x27; </span><span class="token important">&amp;&amp;</span><span class="token plain"> params.eventack </span><span class="token tag" style="color:rgb(255, 121, 198)">!=</span><span class="token plain"> &#x27;No&#x27;) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    throw &#x27;incorrect value for variable &quot;eventack&quot;. The value must be Yes or No.&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (isNaN(parseInt(params.eventupdate)) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> (params.eventupdate &lt; 0 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> params.eventupdate </span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"> 1)) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    throw &#x27;incorrect value for variable &quot;eventupdate&quot;. The value must be 0 or 1.&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">req.addHeader(&#x27;Content-Type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> application/json&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (((params.eventvalue == 1) </span><span class="token important">&amp;&amp;</span><span class="token plain"> (params.eventupdate == 0)) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> params.event_source </span><span class="token tag" style="color:rgb(255, 121, 198)">!==</span><span class="token plain"> &#x27;0&#x27;) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                fields.event_action = &#x27;trigger&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            else if ((params.eventvalue == 1) </span><span class="token important">&amp;&amp;</span><span class="token plain"> (params.eventupdate == 1) </span><span class="token important">&amp;&amp;</span><span class="token plain"> (params.eventack == &#x27;Yes&#x27;))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                fields.event_action = &#x27;acknowledge&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            else if (params.eventvalue == 0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                fields.event_action = &#x27;resolve&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                throw &#x27;incorrect values. Update message without ack will not be sent.&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.host_name = params.host_name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.trigger_severity = params.severity;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.eventname = params.eventname;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.trigger_expression = params.trigger_expression;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.source = params.url;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.trigger_description = params.trigger_description;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.trigger_id = params.trigger_id;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.trigger_hostgroup_name = params.trigger_hostgroup_name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.trigger_status = params.trigger_status;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.event_id = params.eventid;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.eventack = params.eventack;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.eventdate = params.eventdate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.eventtags = params.eventtags;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.eventtime = params.eventtime;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.eventupdate = params.eventupdate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.eventvalue = params.eventvalue;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.event_source = params.event_source;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.hostip = params.hostip;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.triggeropdata = params.triggeropdata;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fields.trigger_name = params.trigger_name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Zabbix.log(4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> &#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Harpia Webhook</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Sending request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">&#x27; + JSON.stringify(fields));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            resp = req.post(params.webhook_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                JSON.stringify(fields)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Zabbix.log(4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> &#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Harpia Webhook</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Receiving response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">&#x27; + resp);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            try </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                resp = JSON.parse(resp);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            catch (error) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                throw &#x27;incorrect response. Harpia returned a non</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">JSON object.&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (req.getStatus() </span><span class="token tag" style="color:rgb(255, 121, 198)">!=</span><span class="token plain"> 200) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (typeof resp === &#x27;object&#x27; </span><span class="token important">&amp;&amp;</span><span class="token plain"> typeof resp.errors === &#x27;object&#x27; </span><span class="token important">&amp;&amp;</span><span class="token plain"> typeof resp.errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> === &#x27;string&#x27;) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    throw resp.errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                else </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    throw &#x27;Unknown error.&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return &#x27;OK&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        catch (error) </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Zabbix.log(3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> &#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Harpia Webhook</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Notification failed </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27; + error);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">throw &#x27;Harpia notification failed</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27; + error;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        Please refer to https://harpia.io/integration/zabbix/.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Set global macro </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">$ZABBIX.URL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> with your Zabbix server URL.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Add a dedicated user with the media type &quot;Harpia&quot; and place the integration key in the &quot;token&quot; parameter to integrate into the service.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">message_templates</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">event_source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TRIGGERS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">operation_mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> PROBLEM</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">subject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Problem: {EVENT.NAME}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Problem started at {EVENT.TIME} on {EVENT.DATE}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Problem name: {EVENT.NAME}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Host: {HOST.NAME}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Severity: {EVENT.SEVERITY}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Operational data: {EVENT.OPDATA}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Original problem ID: {EVENT.ID}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            {TRIGGER.URL}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">event_source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TRIGGERS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">operation_mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> RECOVERY</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">subject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Resolved in {EVENT.DURATION}: {EVENT.NAME}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Problem has been resolved at {EVENT.RECOVERY.TIME} on {EVENT.RECOVERY.DATE}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Problem name: {EVENT.NAME}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Problem duration: {EVENT.DURATION}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Host: {HOST.NAME}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Severity: {EVENT.SEVERITY}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Original problem ID: {EVENT.ID}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            {TRIGGER.URL}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">event_source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TRIGGERS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">operation_mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> UPDATE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">subject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Updated problem in {EVENT.AGE}: {EVENT.NAME}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            {USER.FULLNAME} {EVENT.UPDATE.ACTION} problem at {EVENT.UPDATE.DATE} {EVENT.UPDATE.TIME}.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            {EVENT.UPDATE.MESSAGE}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Current problem status is </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">EVENT.STATUS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> age is </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">EVENT.AGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">acknowledged</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">EVENT.ACK.STATUS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">event_source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> DISCOVERY</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">operation_mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> PROBLEM</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">subject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Discovery: {DISCOVERY.DEVICE.STATUS} {DISCOVERY.DEVICE.IPADDRESS}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Discovery rule: {DISCOVERY.RULE.NAME}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">Device IP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">DISCOVERY.DEVICE.IPADDRESS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">Device DNS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">DISCOVERY.DEVICE.DNS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">Device status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">DISCOVERY.DEVICE.STATUS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">Device uptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">DISCOVERY.DEVICE.UPTIME</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">Device service name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">DISCOVERY.SERVICE.NAME</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">Device service port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">DISCOVERY.SERVICE.PORT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">Device service status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">DISCOVERY.SERVICE.STATUS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">Device service uptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">DISCOVERY.SERVICE.UPTIME</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">event_source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> AUTOREGISTRATION</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">operation_mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> PROBLEM</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">subject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Autoregistration: {HOST.HOST}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Host name: {HOST.HOST}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Host IP: {HOST.IP}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            Agent port: {HOST.PORT}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-click-on-import-button">4. Click on Import button<a class="hash-link" href="#4-click-on-import-button" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_71.png" src="/assets/images/img_71-9aca71994a7fc8897a4422542d87ce75.png" width="1024" height="458" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-choose-the-saved-yaml-file-from-your-device-and-click-on-import">5. Choose the saved .yaml file from your device and click on Import<a class="hash-link" href="#5-choose-the-saved-yaml-file-from-your-device-and-click-on-import" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_72.png" src="/assets/images/img_72-9aca71994a7fc8897a4422542d87ce75.png" width="1024" height="458" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="6-verify-that-you-can-find-new-media-type--harpia">6. Verify that you can find new Media Type – Harpia<a class="hash-link" href="#6-verify-that-you-can-find-new-media-type--harpia" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_73.png" src="/assets/images/img_73-114a3dd07f8f8e45d5e96c5e2fc17b3f.png" width="1024" height="364" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="7-inside-that-media-type-you-need-to-specify-webhook-url-from-harp-integrations-ui">7. Inside that Media Type, you need to specify Webhook URL from <a href="/docs/integration#how-to-find-url-for-integration">Harp Integrations UI</a><a class="hash-link" href="#7-inside-that-media-type-you-need-to-specify-webhook-url-from-harp-integrations-ui" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_74.png" src="/assets/images/img_74-ed8f25543d812c643ce6933fc396c455.png" width="1024" height="907" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="8-now-you-can-add-this-media-type-to-any-users-with-permissions-to-permissions-to-the-servers-click-on-the-users-tab-under-the-administration-section-from-the-sidebar">8. Now, you can add this Media Type to any User/s with permissions to permissions to the servers. Click on the Users tab under the Administration section from the sidebar<a class="hash-link" href="#8-now-you-can-add-this-media-type-to-any-users-with-permissions-to-permissions-to-the-servers-click-on-the-users-tab-under-the-administration-section-from-the-sidebar" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_75.png" src="/assets/images/img_75-e943e79ff3803224bed44102b2fcf822.png" width="342" height="601" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="9-select-users-you-want-to-add-squadcast-media-type-to">9. Select User/s you want to add Squadcast Media Type to<a class="hash-link" href="#9-select-users-you-want-to-add-squadcast-media-type-to" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_76.png" src="/assets/images/img_76-d2a80ddaf8fa7bc4160b9c829828bc5e.png" width="1024" height="273" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="10-navigate-to-media-tab-click-on-add-to-enter-the-following-details">10. Navigate to Media tab, click on Add to enter the following details:<a class="hash-link" href="#10-navigate-to-media-tab-click-on-add-to-enter-the-following-details" title="Direct link to heading">​</a></h4><ul><li><strong>Type:</strong> Choose – Harpia</li><li><strong>Send to:</strong> Any Random text. We are not using it</li><li><strong>When active:</strong> Specify suitable values</li><li><strong>Use if severity:</strong> Select appropriate checkboxes</li><li>Click on <strong>Add</strong> to save the Media for the User</li></ul><p><img loading="lazy" alt="img_77.png" src="/assets/images/img_77-43e674485ba0b0dddc441e9a7c94b450.png" width="713" height="395" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="11-make-sure-you-click-on-update-button-on-the-media-page-to-save-these-details">11. Make sure you click on Update button on the Media page to save these details<a class="hash-link" href="#11-make-sure-you-click-on-update-button-on-the-media-page-to-save-these-details" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_78.png" src="/assets/images/img_78-b0d4de0e797e96e764732539f6f55205.png" width="983" height="189" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="12-navigate-to-actions-tab-under-configurations-section">12. Navigate to Actions tab under Configurations section<a class="hash-link" href="#12-navigate-to-actions-tab-under-configurations-section" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_79.png" src="/assets/images/img_79-68db0e1cc7819acded7f7d49cc8142df.png" width="420" height="547" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="13-click-on-create-action-at-the-top-right-corner-in-the-action-tab-give-the-action-a-meaningful-name-such-as-harpia-notifications">13. Click on Create Action at the top right corner. In the Action tab, give the action a meaningful name, such as Harpia Notifications<a class="hash-link" href="#13-click-on-create-action-at-the-top-right-corner-in-the-action-tab-give-the-action-a-meaningful-name-such-as-harpia-notifications" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_80.png" src="/assets/images/img_80-062f2b1012eee3a0ab9c2e07ba2fd8b6.png" width="992" height="326" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="14-on-the-same-page-switch-to-operations-tab-and-configure-available-options-as-per-your-requirements">14. On the same page, switch to Operations tab and configure available options as per your requirements<a class="hash-link" href="#14-on-the-same-page-switch-to-operations-tab-and-configure-available-options-as-per-your-requirements" title="Direct link to heading">​</a></h4><ul><li><strong>Send to users:</strong> specify the user where you configured Media Type</li><li><strong>Send only to:</strong> Harpia</li></ul><p><img loading="lazy" alt="img_81.png" src="/assets/images/img_81-a8d563a5539380bf39c4c3131f7d5d75.png" width="701" height="592" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="15-specify-recovery-operations--notify-all-involved">15. Specify recovery operations – <strong>Notify all involved</strong><a class="hash-link" href="#15-specify-recovery-operations--notify-all-involved" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_82.png" src="/assets/images/img_82-ea80498b7e09a582ccbc5186a850e694.png" width="1024" height="472" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="16-new-trigger-action-is-ready-to-use">16. New Trigger action is ready to use<a class="hash-link" href="#16-new-trigger-action-is-ready-to-use" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img_83.png" src="/assets/images/img_83-7c8bd0ede0628c75fa13cc9744c258af.png" width="1024" height="260" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="17-you-are-good-to-go-your-zabbix-integration-is-completed-and-you-can-start-working-with-alerts-in-harp">17. You are good to go! Your Zabbix integration is completed, and you can start working with alerts in Harp<a class="hash-link" href="#17-you-are-good-to-go-your-zabbix-integration-is-completed-and-you-can-start-working-with-alerts-in-harp" title="Direct link to heading">​</a></h4><h3 class="anchor anchorWithStickyNavbar_LWe7" id="additional-info">Additional info<a class="hash-link" href="#additional-info" title="Direct link to heading">​</a></h3><ul><li><a href="/docs/integration">How to register new integration in Harp</a></li><li><a href="/docs/category/incoming-integrations">List of all integration</a></li><li><a href="https://www.zabbix.com/" target="_blank" rel="noopener noreferrer">More details about Zabbix</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/the-harpia-io/harpia-docs/tree/master/docs/incoming-integrations/zabbix.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/incoming-integrations/signalfx"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">SignalFx</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/harp-scenarios"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Harp Scenarios</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How it works</a></li><li><a href="#how-to-register-new-integration-in-harp" class="table-of-contents__link toc-highlight">How to register new integration in Harp</a></li><li><a href="#how-to-configure-in-zabbix" class="table-of-contents__link toc-highlight">How to configure in Zabbix</a></li><li><a href="#additional-info" class="table-of-contents__link toc-highlight">Additional info</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Website</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://harpia.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Official Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Demo</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://playground.harpia.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Live Demo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Installation</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://registration.harpia.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Create new environment in Cloud<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 harpia.io</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3ec10cf8.js"></script>
<script src="/assets/js/main.a50b630f.js"></script>
</body>
</html>